name: 'Verify PR'

on:
  pull_request:
    types: [opened, synchronize, reopened]

env:
  GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  GH_REPO: ${{ github.repository }}
  NUMBER: ${{ github.event.pull_request.number }}
  BODY: This issue is available for anyone to work on.

jobs:
  verify-version:
    runs-on: ubuntu-latest

    permissions:
      pull-requests: write

    steps:
      - name: Verificar dependências desatualizadas
        id: check_outdated
        run: |
          npm outdated waves-ui --json > outdated.json
          echo "::set-output name=outdated::$(cat outdated.json)"

      - name: Checar atualizações
        run: |
          if [ -s outdated.json ]; then
            echo "Há atualizações disponíveis."
            # Tome a ação que desejar, por exemplo:
            # echo "Existem atualizações para a biblioteca." >> atualizacoes.log
          else
            echo "Não há atualizações disponíveis."
          fi
